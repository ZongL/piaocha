# 医保发票解析小程序项目大纲

## 项目结构

```
/mnt/okcomputer/output/
├── pages/                    # 页面目录
│   ├── index/               # 主页 - 票据拍照和上传
│   │   ├── index.wxml       # 主页结构
│   │   ├── index.wxss       # 主页样式
│   │   ├── index.js         # 主页逻辑
│   │   └── index.json       # 主页配置
│   ├── analysis/            # 费用分析页面
│   │   ├── analysis.wxml    # 分析页面结构
│   │   ├── analysis.wxss    # 分析页面样式
│   │   ├── analysis.js      # 分析页面逻辑
│   │   └── analysis.json    # 分析页面配置
│   ├── history/             # 历史记录页面
│   │   ├── history.wxml     # 历史页面结构
│   │   ├── history.wxss     # 历史页面样式
│   │   ├── history.js       # 历史页面逻辑
│   │   └── history.json     # 历史页面配置
│   └── profile/             # 个人设置页面
│       ├── profile.wxml     # 设置页面结构
│       ├── profile.wxss     # 设置页面样式
│       ├── profile.js       # 设置页面逻辑
│       └── profile.json     # 设置页面配置
├── components/              # 自定义组件
│   ├── receipt-card/        # 票据卡片组件
│   ├── chart-container/     # 图表容器组件
│   ├── data-statistics/     # 数据统计组件
│   └── search-filter/       # 搜索筛选组件
├── utils/                   # 工具函数
│   ├── api.js              # API接口封装
│   ├── storage.js          # 本地存储管理
│   ├── chart.js            # 图表相关工具
│   └── common.js           # 通用工具函数
├── static/                  # 静态资源
│   ├── images/             # 图片资源
│   │   ├── icons/          # 图标文件
│   │   ├── backgrounds/    # 背景图片
│   │   └── examples/       # 示例图片
│   └── data/               # 模拟数据
├── app.js                   # 小程序主逻辑
├── app.json                 # 小程序全局配置
├── app.wxss                 # 小程序全局样式
├── project.config.json      # 项目配置文件
└── sitemap.json            # 站点地图配置
```

## 页面功能规划

### 1. 主页 (index)
**核心功能**: 票据拍照上传和快速识别
- **拍照区域**: 大型拍照按钮，支持相机调用
- **上传区域**: 支持从相册选择图片
- **识别预览**: 显示OCR识别结果预览
- **快速操作**: 查看最近分析的票据
- **引导提示**: 拍照技巧和注意事项

**交互流程**:
1. 用户点击拍照按钮
2. 调用相机API拍摄票据
3. 图片预处理和OCR识别
4. 显示识别结果确认界面
5. 用户确认后跳转到分析页面

### 2. 费用分析页面 (analysis)
**核心功能**: 数据可视化和详细分析
- **图表展示区域**: 
  - 饼图：医保支付vs现金支付比例
  - 柱状图：各项费用明细
  - 趋势线图：历史费用对比
- **费用明细列表**: 显示所有费用项目
- **筛选功能**: 按费用类型、时间等筛选
- **导出功能**: 生成分析报告

**数据展示**:
- 总费用、医保支付、个人支付
- 各项费用占比和具体金额
- 同比环比分析
- 费用趋势预测

### 3. 历史记录页面 (history)
**核心功能**: 票据管理和查询
- **记录列表**: 显示所有已识别票据
- **搜索功能**: 按医院、日期、费用类型搜索
- **筛选功能**: 多维度筛选选项
- **批量操作**: 批量删除、导出
- **统计概览**: 月度/年度费用统计

**管理功能**:
- 票据详情查看
- 记录编辑和删除
- 数据备份和恢复
- 分类标签管理

### 4. 个人设置页面 (profile)
**核心功能**: 用户个性化设置
- **个人信息**: 医保类型、报销比例设置
- **通知设置**: 费用提醒、分析提醒
- **数据管理**: 数据导出、清理缓存
- **帮助中心**: 使用指南、常见问题
- **关于应用**: 版本信息、用户反馈

## 技术实现要点

### 1. OCR识别集成
- 使用腾讯云OCR API或百度AI开放平台
- 支持多种票据格式识别
- 识别结果结构化处理
- 错误处理和重试机制

### 2. 数据可视化
- 使用ECharts.js或微信原生图表组件
- 响应式图表设计
- 交互式数据展示
- 图表导出功能

### 3. 数据存储
- 本地SQLite数据库存储票据信息
- 图片文件本地存储和管理
- 数据备份和同步机制
- 数据安全和隐私保护

### 4. 用户体验优化
- 页面加载性能优化
- 图片压缩和懒加载
- 离线功能支持
- 错误处理和用户反馈

## 开发优先级

### 第一阶段 (核心功能)
1. 主页拍照上传功能
2. 基础OCR识别集成
3. 费用分析页面开发
4. 基础数据存储

### 第二阶段 (功能完善)
1. 历史记录管理
2. 高级图表功能
3. 搜索筛选功能
4. 数据导出功能

### 第三阶段 (体验优化)
1. 个人设置页面
2. 性能优化
3. 用户反馈系统
4. 帮助文档完善